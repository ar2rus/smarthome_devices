ћои модули ESP-8266 (ESP-12, ESP-07) содержат на борту 512  флеш пам€ти. ƒл€ реализации OTA обновлени€ прошивки допускаетс€ загружать прошивку в свободное место флеш пам€ти. ќбща€ формула расчета свободной пам€ти дл€ загрузки новой прошивки вычисл€етс€ как:

_maxSketchSpace = (ESP.getFreeSketchSpace() - 0x1000) & 0xFFFFF000;

¬ таких услови€х нет возможности загрузки рабочей реальной прошивки поверх текущей рабочей прошивки, т.к суммарной количество пам€ти будет превышать суммарное количество доступного флеша.

«агрузка новой прошивки в услови€х ограниченной свободной флеш-пам€ти производитс€ в 2 этапа:
1) сначала загружаем чистую (маленькую) прошивку, содержащую только поддержку ArduinoOTA
2) поверх чистой прошивки загружаем (большую) рабочую прошивку